!function(b,c){"use strict";var d=b.module("ngContextMenu",[]);d.factory("contextMenu",["$rootScope",function(b){function c(){b.$broadcast("context-menu/close")}return{cancelAll:c,eventBound:!1}}]),d.directive("contextMenu",["$timeout","$interpolate","$compile","contextMenu","$templateRequest","$sce",function(d,e,f,g,h,i){return{restrict:"EA",scope:!0,require:"?ngModel",link:function(d,j,k,l){function m(){d.menu&&(d.menu.remove(),d.menu=null,d.position=null)}function n(){return l?b.extend(d,l.$modelValue):d}function o(a,c){if(c=c||"append","preventDefault"in a)g.cancelAll(),a.stopPropagation(),a.preventDefault(),d.position={x:a.clientX,y:a.clientY};else if(!d.menu)return;h(i.getTrustedResourceUrl(k.contextMenu)).then(function(g){var h=f(g)(b.extend(n())),i=b.element(h);switch(c){case"append":angular.element(document.body).append(i);break;default:d.menu.replaceWith(i)}i.css({position:"fixed",top:0,left:0,transform:e("translate({{x}}px, {{y}}px)")({x:d.position.x,y:d.position.y})}),d.menu=i,d.menu.bind("click",m)})}if(g.eventBound||(c.addEventListener("click",function(){g.cancelAll(),d.$apply()}),g.eventBound=!0),d.$on("context-menu/close",m),l){var p=function(){return l.$modelValue};d.$watch(p,function(){o({},"replaceWith")},!0)}j.bind(k.contextEvent||"contextmenu",o)}}}])}(window.angular,window.document);
